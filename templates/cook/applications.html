{% extends 'base.html' %}

{% block title %}–ú–æ–∏ –∑–∞—è–≤–∫–∏ | –£–º–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è{% endblock %}

{% block content %}
<div class="page-header flex flex-between flex-center">
    <div>
        <h1 class="page-title">–ú–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É</h1>
        <p class="page-subtitle">–ò—Å—Ç–æ—Ä–∏—è –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫–ª–∞–¥–∞</p>
    </div>
    <a href="{% url 'cook_application_create' %}" class="btn btn-primary">+ –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</a>
</div>

<div class="card">
    {% if applications %}
    <table class="table">
        <thead>
            <tr>
                <th>‚Ññ</th>
                <th>–î–∞—Ç–∞</th>
                <th>–ü—Ä–æ–¥—É–∫—Ç—ã</th>
                <th>–°—É–º–º–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
        </thead>
        <tbody>
            {% for app in applications %}
            <tr>
                <td><strong>#{{ app.id }}</strong></td>
                <td>{{ app.date|date:"d.m.Y" }}</td>
                <td>
                    {% for product, amount in app.get_products_with_amounts %}
                        <span class="badge badge-primary">{{ product.name }}: {{ amount }}</span>
                    {% endfor %}
                </td>
                <td>{{ app.price }} ‚ÇΩ</td>
                <td>
                    {% if app.status == 'pending' %}
                        <span class="badge badge-warning">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</span>
                    {% elif app.status == 'approved' %}
                        <span class="badge badge-success">–û–¥–æ–±—Ä–µ–Ω–∞</span>
                    {% else %}
                        <span class="badge badge-danger">–û—Ç–∫–ª–æ–Ω–µ–Ω–∞</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">üìù</div>
        <p>–ó–∞—è–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
        <a href="{% url 'cook_application_create' %}" class="btn btn-primary mt-2">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞—è–≤–∫—É</a>
    </div>
    {% endif %}
</div>
{% endblock %}
