{% extends 'base.html' %}

{% block title %}–û—Ç—á–µ—Ç—ã | –£–º–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤</h1>
    <p class="page-subtitle">–°–≤–æ–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø–∏—Ç–∞–Ω–∏—é –∏ –∑–∞—Ç—Ä–∞—Ç–∞–º</p>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">üìÖ –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞</h2>
    </div>
    
    <form method="get" class="flex gap-2 flex-center">
        <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label">–°</label>
            <input type="date" name="start_date" value="{{ start_date }}" class="form-input">
        </div>
        <div class="form-group" style="margin-bottom: 0;">
            <label class="form-label">–ü–æ</label>
            <input type="date" name="end_date" value="{{ end_date }}" class="form-input">
        </div>
        <button type="submit" class="btn btn-primary" style="margin-top: 1.5rem;">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
    </form>
</div>

<div class="grid grid-2 mt-3">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üí∞ –§–∏–Ω–∞–Ω—Å—ã</h2>
        </div>
        
        <div class="section">
            <div class="flex flex-between mb-2">
                <span>–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è (–æ–ø–ª–∞—Ç—ã):</span>
                <strong class="text-success">+{{ report.payments_total }} ‚ÇΩ</strong>
            </div>
            <div class="flex flex-between mb-2">
                <span>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π:</span>
                <strong>{{ report.payments_count }}</strong>
            </div>
            <div class="flex flex-between mb-2">
                <span>–†–∞—Å—Ö–æ–¥—ã (–∑–∞–∫—É–ø–∫–∏):</span>
                <strong class="text-danger">-{{ report.expenses }} ‚ÇΩ</strong>
            </div>
            <hr style="border-color: var(--border); margin: 1rem 0;">
            <div class="flex flex-between">
                <span><strong>–ë–∞–ª–∞–Ω—Å:</strong></span>
                <strong class="text-primary" style="font-size: 1.25rem;">
                    {% widthratio report.payments_total 1 1 as total %}
                    {% widthratio report.expenses 1 1 as exp %}
                    {{ report.payments_total|add:"-"|add:report.expenses }} ‚ÇΩ
                </strong>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üçΩÔ∏è –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å</h2>
        </div>
        
        <div class="section">
            <div class="flex flex-between mb-2">
                <span>–í—Å–µ–≥–æ –≤—ã–¥–∞–Ω–æ –ø–∏—Ç–∞–Ω–∏—è:</span>
                <strong>{{ report.attendance_total }}</strong>
            </div>
            <div class="flex flex-between mb-2">
                <span>üåÖ –ó–∞–≤—Ç—Ä–∞–∫–æ–≤:</span>
                <strong>{{ report.breakfasts }}</strong>
            </div>
            <div class="flex flex-between mb-2">
                <span>‚òÄÔ∏è –û–±–µ–¥–æ–≤:</span>
                <strong>{{ report.lunches }}</strong>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">
        <h2 class="card-title">üìä –°–≤–æ–¥–∫–∞</h2>
    </div>
    
    <div class="alert alert-info">
        <strong>–ü–µ—Ä–∏–æ–¥:</strong> {{ start_date }} ‚Äî {{ end_date }}<br>
        <strong>–î–æ—Ö–æ–¥—ã:</strong> {{ report.payments_total }} ‚ÇΩ | 
        <strong>–†–∞—Å—Ö–æ–¥—ã:</strong> {{ report.expenses }} ‚ÇΩ | 
        <strong>–ü–∏—Ç–∞–Ω–∏–µ –≤—ã–¥–∞–Ω–æ:</strong> {{ report.attendance_total }} —Ä–∞–∑
    </div>
</div>
{% endblock %}
