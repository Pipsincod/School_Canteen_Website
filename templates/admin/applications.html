{% extends 'base.html' %}

{% block title %}–ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É | –£–º–Ω–∞—è —Å—Ç–æ–ª–æ–≤–∞—è{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">–ó–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É</h1>
    <p class="page-subtitle">–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ –æ—Ç –ø–æ–≤–∞—Ä–æ–≤</p>
</div>

<div class="card">
    {% if applications %}
    <table class="table">
        <thead>
            <tr>
                <th>‚Ññ</th>
                <th>–î–∞—Ç–∞</th>
                <th>–ü–æ–≤–∞—Ä</th>
                <th>–ü—Ä–æ–¥—É–∫—Ç—ã</th>
                <th>–°—É–º–º–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for app in applications %}
            <tr>
                <td><strong>#{{ app.id }}</strong></td>
                <td>{{ app.date|date:"d.m.Y" }}</td>
                <td>{{ app.user.name }}</td>
                <td>
                    {% for product, amount in app.get_products_with_amounts %}
                        <span class="badge badge-primary">{{ product.name }}: {{ amount }}</span>
                    {% endfor %}
                </td>
                <td>{{ app.price }} ‚ÇΩ</td>
                <td>
                    {% if app.status == 'pending' %}
                        <span class="badge badge-warning">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</span>
                    {% elif app.status == 'approved' %}
                        <span class="badge badge-success">–û–¥–æ–±—Ä–µ–Ω–∞</span>
                    {% else %}
                        <span class="badge badge-danger">–û—Ç–∫–ª–æ–Ω–µ–Ω–∞</span>
                    {% endif %}
                </td>
                <td>
                    {% if app.status == 'pending' %}
                        <a href="{% url 'admin_application_action' app.id 'approve' %}" class="btn btn-success btn-sm">–û–¥–æ–±—Ä–∏—Ç—å</a>
                        <a href="{% url 'admin_application_action' app.id 'reject' %}" class="btn btn-danger btn-sm">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</a>
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">üìã</div>
        <p>–ó–∞—è–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</p>
    </div>
    {% endif %}
</div>
{% endblock %}
